# Apache SSL Virtual Host Configuration for Docker Containers
# This file serves as a template for the bitnami-ssl.conf configuration  
# Generated automatically by deployment workflow

# HTTPS Virtual Hosts for LivroLog

<VirtualHost *:443>
    ServerName dev.livrolog.com
    ServerAlias www.dev.livrolog.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/dev.livrolog.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/dev.livrolog.com/privkey.pem

    # Proxy to Docker Web container
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8080/
    ProxyPassReverse / http://127.0.0.1:8080/

    ErrorLog /opt/bitnami/apache/logs/dev-ssl-error.log
    CustomLog /opt/bitnami/apache/logs/dev-ssl-access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerName api.dev.livrolog.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/dev.livrolog.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/dev.livrolog.com/privkey.pem

    # Proxy to Docker API container - NO CORS headers (Laravel handles CORS)
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8081/
    ProxyPassReverse / http://127.0.0.1:8081/
    
    ErrorLog /opt/bitnami/apache/logs/api-dev-ssl-error.log
    CustomLog /opt/bitnami/apache/logs/api-dev-ssl-access.log combined
</VirtualHost>

# Production SSL configs
<VirtualHost *:443>
    ServerName api.livrolog.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/livrolog.com/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/livrolog.com/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/livrolog.com/chain.pem

    # Proxy to production API container
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:18081/
    ProxyPassReverse / http://127.0.0.1:18081/

    ErrorLog /opt/bitnami/apache/logs/api-livrolog_error.log
    CustomLog /opt/bitnami/apache/logs/api-livrolog_access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerName livrolog.com
    ServerAlias www.livrolog.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/livrolog.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/livrolog.com/privkey.pem

    # Proxy to production Web container
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:18080/
    ProxyPassReverse / http://127.0.0.1:18080/

    ErrorLog /opt/bitnami/apache/logs/prod-ssl-error.log
    CustomLog /opt/bitnami/apache/logs/prod-ssl-access.log combined
</VirtualHost>